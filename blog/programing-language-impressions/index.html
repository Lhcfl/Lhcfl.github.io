<!DOCTYPE html><html lang="zh-CN"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/webp" href="/_astro/logo.zcK9pHo2_2eS7vq.webp"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Zero Calorie Drink Shop" href="https://lhcfl.github.io/rss.xml"><meta name="generator" content="Astro v5.10.0"><!-- Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://chinese-fonts-cdn.deno.dev"><link rel="preconnect" href="https://ik.imagekit.io" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://lhcfl.github.io/blog/programing-language-impressions/"><!-- Primary Meta Tags --><title>Programing Language Impressions ⬝ Zero Calorie Drink Shop</title><meta name="title" content="Programing Language Impressions ⬝ Zero Calorie Drink Shop"><meta name="description" content="Impressions of the programming languages I have come across
"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://lhcfl.github.io/blog/programing-language-impressions/"><meta property="og:title" content="Programing Language Impressions ⬝ Zero Calorie Drink Shop"><meta property="og:description" content="Impressions of the programming languages I have come across
"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://lhcfl.github.io/blog/programing-language-impressions/"><meta property="twitter:title" content="Programing Language Impressions ⬝ Zero Calorie Drink Shop"><meta property="twitter:description" content="Impressions of the programming languages I have come across
"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.AM2StPgK.js"></script><link rel="stylesheet" href="/_astro/_static_page_.DYt1UbNe.css">
<link rel="stylesheet" href="/_astro/_static_page_.DST4ihUU.css">
<link rel="stylesheet" href="/_astro/_static_page_.CGWgwbcx.css">
<style>@reference "../styles/tailwind.css";.items[data-astro-cid-qtyrxm4s]{display:flex;flex-wrap:wrap;gap:calc(var(--spacing) * 2);max-width:100%;text-overflow:ellipsis;overflow:hidden}.item[data-astro-cid-qtyrxm4s]{font-size:var(--text-sm-fontSize);line-height:var(--un-leading, var(--text-sm-lineHeight));display:flex;gap:calc(var(--spacing) * 1);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center;position:relative}.item[data-astro-cid-qtyrxm4s]:after{background-color:color-mix(in srgb,var(--colors-primary) 50%,transparent);width:100%;height:.15em;--un-scale-x:0%;--un-scale-y:0%;scale:var(--un-scale-x) var(--un-scale-y);transition-property:all;transition-timing-function:var(--un-ease, var(--default-transition-timingFunction));transition-duration:var(--un-duration, var(--default-transition-duration));left:calc(var(--spacing) * 0);bottom:calc(var(--spacing) * 0);position:absolute;content:""}@supports (color: color-mix(in lab,red,red)){.item[data-astro-cid-qtyrxm4s]:after{background-color:color-mix(in oklab,var(--colors-primary) 50%,transparent)}}@property --un-bg-opacity{syntax:"<percentage>";inherits:false;initial-value:100%;}.item[data-astro-cid-qtyrxm4s]:hover:after{--un-scale-x:100%;--un-scale-y:100%;scale:var(--un-scale-x) var(--un-scale-y)}@property --un-scale-x{syntax:"*";inherits:false;initial-value:1;syntax:"*";inherits:false;initial-value:1;}@property --un-scale-y{syntax:"*";inherits:false;initial-value:1;syntax:"*";inherits:false;initial-value:1;}@property --un-scale-z{syntax:"*";inherits:false;initial-value:1;syntax:"*";inherits:false;initial-value:1;}
</style><script type="module" src="/_astro/page.sN3tJsal.js"></script></head> <body class="overflow-y-scroll has-sidebar"> <div class="app bg-surface text-content md:flex lg:justify-center max-w-full">  <header class="print:hidden flex sticky top-0 flex-[0_0_auto]" un-max-md="items-center justify-between w-full h-15 z-50 bg-surface px-2" un-max-lg="w-20" un-lg="w-70" un-md="flex-col h-screen text-lg p-4 flex-shrink-0 flex-grow-0" un-border="max-md:b md:r  base-300"> <a href="/" class="flex flex-col items-center gap-2 lg:mt-4"> <div class="nav-site-avatar avatar w-10 md:w-12 lg:hidden"> <img src="/_astro/logo.zcK9pHo2_2eS7vq.webp" alt="Zero Calorie Drink Shop" loading="eager" decoding="async" fetchpriority="auto" width="100" height="100"> </div> <div class="nav-site-avatar avatar max-lg:hidden w-40"> <img src="/_astro/logo.zcK9pHo2_16JEEU.webp" alt="Zero Calorie Drink Shop" loading="eager" decoding="async" fetchpriority="auto" width="512" height="512"> </div> <span class="nav-site-title text-lg font-bold max-lg:hidden">Zero Calorie Drink Shop</span> </a> <nav class="links flex items-center gap-2 text-lg" un-md="flex-col pt-6 text-2xl" un-lg="text-base"> <a href="/" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Home" data-path-name="blog/programing-language-impressions/" data-href-base="/"> <svg width="1em" height="1em" data-icon="mingcute:home-3-line">   <symbol id="ai:mingcute:home-3-line" viewBox="0 0 24 24"><g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M10.772 2.688a2 2 0 0 1 2.317-.099l.139.1l8.384 6.52c.721.561.37 1.692-.499 1.785l-.116.006H20v8a2 2 0 0 1-1.85 1.995L18 21H6a2 2 0 0 1-1.994-1.85L4 19v-8h-.997C2.09 11 1.671 9.892 2.3 9.285l.088-.076zM12 4.267L5.625 9.225c.229.185.375.468.375.785V19h3v-5a3 3 0 1 1 6 0v5h3v-8.99c0-.317.146-.6.375-.785zM12 13a1 1 0 0 0-1 1v5h2v-5a1 1 0 0 0-1-1"/></g></symbol><use href="#ai:mingcute:home-3-line"></use>  </svg> <span class="max-lg:hidden"> Home </span> </a><a href="/archives" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Archives" data-path-name="blog/programing-language-impressions/" data-href-base="archives"> <svg width="1em" height="1em" data-icon="mingcute:archive-line">   <symbol id="ai:mingcute:archive-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M16.586 3A2 2 0 0 1 18 3.586L20.414 6A2 2 0 0 1 21 7.414V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7.414A2 2 0 0 1 3.586 6L6 3.586A2 2 0 0 1 7.414 3zM19 9H5v10h14zm-7 1a1 1 0 0 1 1 1v3.186l.414-.414a1 1 0 1 1 1.414 1.414l-2.12 2.121a1 1 0 0 1-1.415 0l-2.121-2.121a1 1 0 1 1 1.414-1.414l.414.414V11a1 1 0 0 1 1-1m4.586-5H7.414l-2 2h13.172z"/></g></symbol><use href="#ai:mingcute:archive-line"></use>  </svg> <span class="max-lg:hidden"> Archives </span> </a><a href="/notes/1" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Notes" data-path-name="blog/programing-language-impressions/" data-href-base="notes"> <svg width="1em" height="1em" data-icon="mingcute:notebook-line">   <symbol id="ai:mingcute:notebook-line" viewBox="0 0 24 24"><g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M17 2c1.598 0 3 1.3 3 3v13c0 1.7-1.4 3-3 3H6c-1.054 0-2-.95-2-2V4c0-1.054.95-2 2-2zm0 2h-7v15h7c.513 0 1-.39 1-1V5c0-.513-.49-1-1-1M8 4H6v15h2z"/></g></symbol><use href="#ai:mingcute:notebook-line"></use>  </svg> <span class="max-lg:hidden"> Notes </span> </a><a href="/tags" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Tags" data-path-name="blog/programing-language-impressions/" data-href-base="tags"> <svg width="1em" height="1em" data-icon="mingcute:tag-2-line">   <symbol id="ai:mingcute:tag-2-line" viewBox="0 0 24 24"><g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M10.238 4.827a3 3 0 0 1 2.122.878l6.485 6.486a3 3 0 0 1 0 4.242l-4.243 4.243a3 3 0 0 1-4.242 0l-6.486-6.485a3 3 0 0 1-.878-2.122V7.327a2.5 2.5 0 0 1 2.5-2.5zm0 2H5.496a.5.5 0 0 0-.5.5v4.742a1 1 0 0 0 .292.707l6.486 6.486a1 1 0 0 0 1.414 0l4.243-4.243a1 1 0 0 0 0-1.414L10.945 7.12a1 1 0 0 0-.707-.293M7.531 9.362a1.5 1.5 0 1 1 2.121 2.122a1.5 1.5 0 0 1-2.121-2.122M11.652 2a3 3 0 0 1 2.122.878l7.192 7.193a1 1 0 0 1-1.414 1.414L12.36 4.29a1 1 0 0 0-.708-.29H7a1 1 0 0 1 0-2z"/></g></symbol><use href="#ai:mingcute:tag-2-line"></use>  </svg> <span class="max-lg:hidden"> Tags </span> </a><a href="/about" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="About" data-path-name="blog/programing-language-impressions/" data-href-base="about"> <svg width="1em" height="1em" data-icon="mingcute:user-3-line">   <symbol id="ai:mingcute:user-3-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M12 13c2.396 0 4.575.694 6.178 1.672c.8.488 1.484 1.064 1.978 1.69c.486.615.844 1.351.844 2.138c0 .845-.411 1.511-1.003 1.986c-.56.45-1.299.748-2.084.956c-1.578.417-3.684.558-5.913.558s-4.335-.14-5.913-.558c-.785-.208-1.524-.506-2.084-.956C3.41 20.01 3 19.345 3 18.5c0-.787.358-1.523.844-2.139c.494-.625 1.177-1.2 1.978-1.69C7.425 13.695 9.605 13 12 13m0 2c-2.023 0-3.843.59-5.136 1.379c-.647.394-1.135.822-1.45 1.222c-.324.41-.414.72-.414.899c0 .122.037.251.255.426c.249.2.682.407 1.344.582C7.917 19.858 9.811 20 12 20c2.19 0 4.083-.143 5.4-.492c.663-.175 1.096-.382 1.345-.582c.218-.175.255-.304.255-.426c0-.18-.09-.489-.413-.899c-.316-.4-.804-.828-1.451-1.222C15.843 15.589 14.023 15 12 15m0-13a5 5 0 1 1 0 10a5 5 0 0 1 0-10m0 2a3 3 0 1 0 0 6a3 3 0 0 0 0-6"/></g></symbol><use href="#ai:mingcute:user-3-line"></use>  </svg> <span class="max-lg:hidden"> About </span> </a><a href="/links" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Links" data-path-name="blog/programing-language-impressions/" data-href-base="links"> <svg width="1em" height="1em" data-icon="mingcute:link-3-line">   <symbol id="ai:mingcute:link-3-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M1 10a5 5 0 0 1 5-5h6a5 5 0 0 1 0 10a1 1 0 1 1 0-2a3 3 0 1 0 0-6H6a3 3 0 0 0-.75 5.906a1 1 0 0 1-.5 1.936A5 5 0 0 1 1 10m11 1a3 3 0 1 0 0 6h6a3 3 0 0 0 .75-5.905a1 1 0 0 1 .5-1.937A5.002 5.002 0 0 1 18 19h-6a5 5 0 0 1 0-10a1 1 0 1 1 0 2"/></g></symbol><use href="#ai:mingcute:link-3-line"></use>  </svg> <span class="max-lg:hidden"> Links </span> </a><a href="/search" role="button" class="header-link flex items-center justify-center gap-1 transition md:h-10 md:w-full md:hover:bg-primary/10 md:hover:text-primary" aria-label="Search" data-path-name="blog/programing-language-impressions/" data-href-base="search"> <svg width="1em" height="1em" data-icon="mingcute:search-3-line">   <symbol id="ai:mingcute:search-3-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M10.5 4a6.5 6.5 0 1 0 0 13a6.5 6.5 0 0 0 0-13M2 10.5a8.5 8.5 0 1 1 15.176 5.262l3.652 3.652a1 1 0 0 1-1.414 1.414l-3.652-3.652A8.5 8.5 0 0 1 2 10.5M9.5 7a1 1 0 0 1 1-1a4.5 4.5 0 0 1 4.5 4.5a1 1 0 1 1-2 0A2.5 2.5 0 0 0 10.5 8a1 1 0 0 1-1-1"/></g></symbol><use href="#ai:mingcute:search-3-line"></use>  </svg> <span class="max-lg:hidden"> Search </span> </a> </nav> <div class="navbar-end" un-md="flex-grow flex items-baseline-last justify-center"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="18tXJb" component-url="/_astro/DarkLightToggle.6qHju4aH.js" component-export="default" renderer-url="/_astro/client.svelte.DMhakGtm.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;DarkLightToggle&quot;,&quot;value&quot;:true}" await-children><!--[--><button class="i-mingcute:moon-stars-line" aria-label="toggle theme"></button><!--]--><!--astro:end--></astro-island> </div> </header> <div class="main-and-footer__outer-container
        max-w-full min-h-screen overflow-x-hidden
        flex flex-grow flex-shrink flex-basis-200 xl:flex-grow-0 at-md:justify-center"> <div class="flex flex-col w-full max-w-200"> <main class="flex-grow relative p-4 md:pt-6 undefined">  <article> <h1 class="page-title text-3xl font-bold">  <span>Programing Language Impressions</span>  </h1> <div> <div class="markdown-body is-detailed"> <p lang="en">Impressions of the programming languages I have come across</p>
<!-- more -->
<h3 id="c">C</h3>
<p lang="zh">老登语言，不如说我非常难以理解为什么这玩意几乎就是个汇编的封装器却会成为各大高校的入门教材……？</p>
<p lang="zh">C 语言根本谈不上什么设计，因为它可以说就是没有设计。它就是个被造出来的人类可读的汇编简记法，然后碰巧火了而已。所以我不承认什么 C 的优秀，C 优秀根本就不在于它是 C，而在于用 C 写的那些 killer app，比如 UNIX。</p>
<p lang="zh">的确，实事求是的说，C 语言是最通用、最可移植的语言，但是这并不是因为 C 的设计优秀，恰恰相反其实是因为 C 就是一个汇编的封装，可移植的其实不是“优秀的语法”，而是汇编。如果你要说 C 优秀，那么汇编也优秀。</p>
<p lang="zh">关于 C 语言的缺点也许我能说一箩筐。在这里说几个很重要的</p>
<ul lang="zh">
<li>
<p lang="zh"><strong>类型环绕</strong>： C 的变量类型既不是后置也不是前置，可以说完全就是反人类的环置。C 语言为了省几个标记，整出了一套奇丑无比的类型标记。让我们举个例子</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="c"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">void</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#6F42C1;--shiki-dark:#B392F0">signal</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#D73A49;--shiki-dark:#F97583">int</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#D73A49;--shiki-dark:#F97583">void</span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#D73A49;--shiki-dark:#F97583">int</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#D73A49;--shiki-dark:#F97583">int</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
<p lang="zh">猜猜它是什么？一个浸淫 C 语言多年的人或许能马上说出来，但我懒得用 C 的类型规则详细解释。总而言之，它的作用是</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">fn</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> signal</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">x</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> i32</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, f</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#D73A49;--shiki-dark:#F97583"> fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">sig</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> i32</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> fn</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">a</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> i32</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="zig"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">fn</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> signal</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">s</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: </span><span style="color:#D73A49;--shiki-dark:#F97583">i32</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">f</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: </span><span style="color:#D73A49;--shiki-dark:#F97583">*const</span><span style="color:#D73A49;--shiki-dark:#F97583"> fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">a</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: </span><span style="color:#D73A49;--shiki-dark:#F97583">i32</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">void</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">*const</span><span style="color:#D73A49;--shiki-dark:#F97583"> fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">a</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: </span><span style="color:#D73A49;--shiki-dark:#F97583">i32</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">void</span></span></code></pre>
<p lang="zh">类型扭曲成环状，需要你瞻前顾后，解方程一样地解出一个 variable 到底是什么类型。你可别说这是什么构造出的用不上的东西。这是 signal 库函数，《C 陷阱与缺陷》讲过如何逐渐写出这样一个类型。</p>
<p lang="zh">这种环置的做法不仅成为了经久不衰的 C 语言考题（在现代的语言里你都不需要考——类型非常直观），而且给 C++ 带来了极大的麻烦，让 C++ 的文法不得不非常复杂。可笑的是，不少习惯了 C 语言的人觉得这种扭曲的环状类型才是自然，反而觉得 typescript 那样的类型后置是错误。</p>
</li>
<li>
<p lang="zh"><strong>简陋</strong>：图灵完备又怎么样？要知道 brainfuck 也是图灵完备的。C 的一大缺点就是它简陋的没话说。没有泛型，很难避免 <code>void*</code> 满天飞。没有 namespace，随时要小心名字冲突。没有哪怕是 <code>defer</code> 这样的东西，错误处理/垃圾回收纯靠 goto 仙人，或者写宏手动把代码压栈这样的奇妙技巧。当然你可以说写 C 就是为了底层为了手动操作内存为了对机器有全面控制——先不说“我能管好内存”的自信带来了多少亿美元的损失，多少个印象深远的 0 day，C 也不是真正的底层啊？<a href="https://dl.acm.org/doi/pdf/10.1145/3212477.3212479">C Is Not a Low-level Language: Your computer is not a fast PDP-11.</a> 这篇文章讲述了理由：</p>
<blockquote>
<p lang="zh">低级语言的一个共同属性是它们速度很快。特别是，它们应该易于转换为快速代码，而不需要特别复杂的编译器。一个足够聪明的编译器可以使语言变得快的论点是 C 语言的支持者在谈论其他语言时经常不屑一顾的论点。
不幸的是，提供快速代码的简单翻译对于 C 来说并非如此。尽管处理器架构师投入了英勇的努力来尝试设计能够快速运行 C 代码的芯片，但 C 程序员期望的性能水平只能通过极其复杂的编译器转换才能实现。Clang 编译器（包括 LLVM 的相关部分）大约有 200 万行代码。即使只计算使 C 快速运行所需的分析和转换传递，加起来也接近 200,000 行（不包括注释和空行）。</p>
</blockquote>
<p lang="zh">C 在它诞生的年代确实是底层语言——但现在 ​ 已经 53 年过去了。PDB-11 早就已经成老古董了。现在随便哪家流行 CPU 都有一堆复杂的指令预测，三级缓存，向量计算，而所有这些东西在 C 语言里都需要付出更多的努力来完成，例如，像 Zig 和 Rust 这样的现代底层语言早就提供了原生的向量运算。Rust 的所有权系统也允许编译器做极其激进的优化，where C/C++ 许多人口口相传的是“不要开 O3”——为什么？当然是因为语言提供的约束不足，编译器无从做优化假设，甚至有时候程序员还直接写了未定义行为。</p>
<p lang="zh">C 语言程序员，嵌入式的或许不算，但是通用架构下 C 语言根本就很难说是在接近底层。它只是给了人底层的幻觉。</p>
</li>
</ul>
<h3 id="c-1">C++</h3>
<p>Awesome language only when for algorithm competitions. 内存泄露？让它漏呗我们要的是超快速度！</p>
<p lang="zh">但是除了算法竞赛以外 C++ 实在是拉胯得让人无话可说。</p>
<p lang="zh">其实 C++ 挺遗憾的，C++0x 几乎就是个废物，在 90 年代末相对高级的语言群魔乱舞起来的时候只有 C++ 在那里不思进取吃老本，终于等 C++11 出来了挺大江山已经流失了，笑</p>
<p lang="zh">你很难找到一门语言又进步又过时，既简单又难……除了 C++</p>
<p lang="zh">可以说 C++ 其实很 fancy，它融入了很多新概念，但是它融入得不够好。都怪那该死的兼容性（乐）。到现在 C++ 的语法可以称得上一句沉重，但是沉重中又没有多少用得上的……</p>
<p lang="zh">举个例子吧 <code>std::optional&#x3C;T></code>. 这玩意好吗？太好了。Null 的发明者都亲口说 null 完全是<a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/">一次数十亿美元级的错误</a>了。而我得说 C++ 简直就是这场错误的集大成者。C++ 里到处都是类似 Null 的东西。拿特殊的值标记无效的内存区域。灾难中的灾难。</p>
<p lang="zh">为此明明有 Rust 可以学的，结果 C++ 就学了一个皮毛——把 <code>optional&#x3C;T></code> 抄过来了，然后就不管了。<code>std::map</code> 都有好多不同的取值方式了，什么 <code>[]</code> 在 key 不存在的时候返回默认 constructor，什么 <code>at</code> 抛出 <code>std::out_of_range</code> 异常， <code>find</code> 返回 <code>end</code> 迭代器，妈呀结果就是没有用上 STL 自己的 <code>optional&#x3C;T></code> 的——excuse me？所以你弄一个 <code>optional&#x3C;T></code> 是为了走时髦吗？</p>
<p lang="zh">至于 C++ 很难的问题，其实倒是可以接受，因为 C++ 简单——你可以同时觉得 C++ 简单和难得要死。听上去很离谱，但是是 C++，倒也正常.png</p>
<p lang="zh">C++ 就是那种非常适合算法竞赛、非常适合学生上课的语言。反正内存安全去他爹，裸指针乱飞，嵌套结构稍微学学就会，性能还超级高，还封装了一堆常用数据结构，它不火谁火.png</p>
<p lang="zh">但是复杂度摆在那里。如果要简单，那就一定有复杂在反面等着你。一门面向底层的语言，讲究极致压榨性能极致压榨空间甚至到处都是直接操作内存、还有超级多历史包袱的语言居然还能做到让一个初学编程的人轻松写出一坨狗屎也能通过编译，那要写出“优雅”的代码它肯定会很难，这一点也不难理解吧。就是它有点难过头了而已。</p>
<p lang="zh">很难说如果 C++再这样赶时髦地加入新功能下去是不是某种自取灭亡，只能说希望不是吧</p>
<details>
<summary>以下是说怪话时间</summary>
<p lang="zh">C++ 真是一门<sup><i>优美</i></sup>又<sub><u>简洁</u></sub>的语言啊 真是优优又美美啊</p>
<p lang="zh">你看别的语言还在 <code>&#x3C;T extends U | V></code> 真是难难又懂懂啊 extends 是什么？竖线又是什么？真是不说人话让人<sup>难</sup>以理<sub>解</sub>呢</p>
<p lang="zh">再看我们 C++ 啊跟念诗一样</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="cpp"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">template</span><span style="color:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="color:#D73A49;--shiki-dark:#F97583">typename</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> T</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">requires</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">std</span><span style="color:#24292E;--shiki-dark:#E1E4E8">::</span><span style="color:#6F42C1;--shiki-dark:#B392F0">is_base_of_v</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">T, U</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">or</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> std</span><span style="color:#24292E;--shiki-dark:#E1E4E8">::</span><span style="color:#6F42C1;--shiki-dark:#B392F0">is_base_of_v</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">T, V</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">bar</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> foo</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">T</span><span style="color:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="color:#E36209;--shiki-dark:#FFAB70"> xyz</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
<p lang="zh">你看我写了一个 T 啊当然是模板啊 又 requires 啊 is base of 就是基类啊 用 or 取代竖线英英又语语啊 哪怕是不懂 C++ 的人看到也能马 ↑ 上 ↓ 理解这是在说什么呢</p>
<p lang="zh">真是容易理解呢呢呢这就是我们 C++ 啊真是 CC 又加加啊</p>
</details>
<h3 id="crystal">Crystal</h3>
<p lang="zh">截止到本文的上次编辑 Crystal 还是一门非常初生（？）的语言，嗯就是语法描述也不全，生态少得可怜，连编辑器提示都没有，各种地方都透露着种种不成熟</p>
<p lang="zh">但这玩意确实是个静态、native 语言，还是 native 语言中的异类，在 native 中做到了可以尽可能地少写类型，而且居然还有类 Ruby 语法，弄得这语言跟个动态语言似的</p>
<p lang="zh">非常喜欢的是 Crystal 继承自 Ruby 的一个特性，你可以随意 Reopen 一个 class 然后添加进去自己的方法。甚至官方库都是这样做的，比如 JSON 库：它直接把 int 打开了然后往里面塞了一个 <code>to_json</code> 的成员函数，然后所有 int 就能 to_json 了，非常的好用</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="crystal"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">struct</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Int</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> to_json</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">json : </span><span style="color:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="color:#24292E;--shiki-dark:#E1E4E8">::</span><span style="color:#005CC5;--shiki-dark:#79B8FF">Builder</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> : </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Nil</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    json.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">number</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">self</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> to_json_object_key</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> : </span><span style="color:#005CC5;--shiki-dark:#79B8FF">String</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    to_s</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  end</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">end</span></span></code></pre>
<p lang="zh">这个真的很妙，虽然它有一个众所周知的缺点，要克制，小心和别的库添加了冲突的成员函数。但是相比之下这个带来的简直是致命的诱惑，可以通过 reopen 创造非常具有表达力的语法，就像 Rails 做的那样。</p>
<h3 id="elixir">Elixir</h3>
<p lang="da">认识 Elixir 是因为在 Fediverse 上知道了 Pleroma 这个软件。Elixir 似乎是借鉴了许多 Ruby 的写法和不错的地方。</p>
<h3 id="gleam">Gleam</h3>
<p lang="zh">灵感来源于 Rust 的函数式语言。虽然但是，感觉有点……简陋……</p>
<p lang="en">在 tour 里一开始被它的长相骗了，直到看到 Gleam is an <strong>immutable</strong> language, so using the record update syntax does not mutate or otherwise change the original record 才惊觉欸 www 怎么是 immutable 的</p>
<p lang="zh">暂且还非常不成熟，所以呈观望态度吧。</p>
<p lang="zh">Gleam 语言初见文章见：<a href="/2025/01/06/gleam-intro/">仿生电子锈会梦到自己变成纯函数式吗：gleam 语言初见</a></p>
<h3 id="haskell">Haskell</h3>
<p lang="zh">纯函数式编程教科书级别语言。</p>
<p lang="zh">Haskell 的语法写起来和不是函数式的语言真的完全不一样！在 haskell 里面 <code>a = x</code> 完全不是赋值啊是定义了一个函数 <code>a</code> 返回 <code>x</code> xd</p>
<p lang="zh">⬆️ 上面是完全没学的时候写的。</p>
<p lang="zh">在逐渐入门了函数式语言以后，其实觉得 Haskell 不是一门很适合入门的函数式语言，它应该是半工业半学术的函数式语言中最有名的那个，但它缺点是（可能比较老吧？）有很多不够的地方。</p>
<p lang="zh">比如 <code>map :: (a -> b) -> [a] -> [b]</code>，之前开玩笑说 Haskell 才是真正的 Lisp（列表处理器），因为 Haskell 在语法上给了列表太优先的支持…… List 的 map 比 general 的 functor 发现得更早，所以占了这个位置，然后 <code>fmap :: Functor f => (a -> b) -> f a -> f b</code> 就不得不加个 f 表示区别，但是对于 List 而言 fmap 和 map 其实完全是一个作用。</p>
<p lang="zh">同样的，Haskell 不是用 <code>List a</code> 表示一个元素类型为 a 的列表，而是 <code>[a]</code>，List 多么特殊以至于专门在类型里占了个符号。还有 <code>:</code> 表示 List 的 prepend，(<code>(:) :: a -> [a] -> [a]</code>) 把类型的 <code>:</code> 都占了，那么类型就只好用 <code>::</code> 去了。Lisp 这个名字颁发给你 Haskell 得了（不是）</p>
<p lang="zh">后来的函数式语言一般都 <code>:</code> 表示类型，<code>::</code> 表示 List prepend 了。</p>
<p lang="zh">我学 Haskell 其实有很多次尝试了，毕竟 Haskell 实在是太有名了，</p>
<div style="text-align: center">
<p><img alt="haskell: you re not pure enough! | 200" loading="lazy" decoding="async" fetchpriority="auto" width="512" height="479" src="/_astro/haskell%20said%20you%20re%20not%20pure%20enough.BuuGUuSp_279k3z.webp" ></p>
<p>（乱入一张梗图）</p>
</div>
<p lang="zh">但是考虑到我学了太久的命令式语言，在 2025 年前的尝试全部无功而返，甚至连 a + b problem 都写的非常吃力。更何况 haskell 学了数学人的不良习惯（我不管我不管我就要说不良习惯），写代码喜欢跳着看，比如 dot 这个宝贵的符号居然被 Prelude 占用了！ <code>(.) f g x = f (g x)</code> ，然后用了一个很丑的 <code>(&#x26;) x f = f x</code> 比 <code>|></code> 还难受。我会笑话 Haskell 人眼睛是不是倒着长的，会非常习惯于 <code>(f4 . f3 . f2 . f1) x1 x2 x3 x4</code> 这种操作。还有 <code>($ x)</code> 这个抽象东西。可以把 <code>$</code> 念成 apply，<code>($ x) f</code> 其实就是 <code>f $ x</code> 也就是 <code>f x</code>。——这就要说到 <del>pointless</del> pointfree 样式了，Haskell 人喜欢用这个样式写出紧凑而 <del>pointfree</del> 的代码，爽了一时更难看懂了许多（）甚至当你写出</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="haskell"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">sum xs </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> foldr </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">+</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> xs</span></span></code></pre>
<p lang="en">的时候，linter 都会贴心提醒您 why not</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>sum = foldr (+) 0</span></span></code></pre>
<p lang="zh">我去，谁 ™ 会觉得后者更好啊，除了被 Haskell 腌入味的人。</p>
<p lang="zh">这些！全都是我在学了可能通常被看作更难的 Lean 4（写这句话的时候我没学证明，而是 Functional Programing in Lean 4）之后，由于 Lean 4 更好的习惯，才逐渐能进一步理解更超凡脱俗（原谅我找不到好的形容词）的 Haskell。比如 Lean 4 的 · 记号和数学上的 cdot 很像，我很喜欢这个糖，<code>(·+1)</code> 会被 desugar to <code>fun x => x + 1 : Nat → Nat</code>，很好的诠释了“占位符”的概念。你也可以造出 <code>·/·</code> 这个东西相当于除法函数。 嗯，于是我才意识到小学数学教会我们的 <code>÷</code> 记号其实就是分数线上方下方都用 cdot 代替了。</p>
<p lang="zh">不过 Haskell 给我的另一个印象是，因为这种自由性，可以不用自定义语法而类似自定义语法。例如，因为 haskell 比较的激进 pure functional，它是没有 return 这个 keyword 的。但是你却能写出</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="haskell"><code><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">foo bar </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  baz </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> bar</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> bar </span><span style="color:#D73A49;--shiki-dark:#F97583">then</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    return </span><span style="color:#005CC5;--shiki-dark:#79B8FF">42</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  else</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    -- do</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    -- some</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    -- logic</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    return baz</span></span></code></pre>
<p lang="zh">那么 <code>return</code> 是什么呢？其实 <code>return</code> 是 <code>pure</code> （），就 Monad 里面那个。感觉 Haskell 应该是为了让你感觉更像命令式编程搞了这玩意</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="haskell"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">class</span><span style="color:#D73A49;--shiki-dark:#F97583"> Monad</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#D73A49;--shiki-dark:#F97583">where</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  return</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m a</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">></span><span style="color:#6F42C1;--shiki-dark:#B392F0">></span><span style="color:#6F42C1;--shiki-dark:#B392F0">=</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#D73A49;--shiki-dark:#F97583">  ::</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m b</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m b</span></span></code></pre>
<p lang="zh">这玩意只能说，虽然不如 Lean 4 直接，Lean 4 直球搞了一套 while for return break 这些东西的语法糖，但是作为一个糖吃吃味道也不错。</p>
<h3 id="idris--idris-2">Idris / Idris 2</h3>
<p lang="zh">idris 是一门有趣的语言。<del>但它大概需要你先学 Haskell</del>。说不定可以说它是 better haskell，不过 idris 的生态实在是太差了，windows 支持完全是狗屎，所以我没来得及更多探索。</p>
<p lang="zh">idris 是一门 dependent type 支持的语言。相比于 haskell 它更好地支持了许多有趣和实用的东西。</p>
<p lang="zh">Dependent Type 允许你还有类型安全的带长度的 List（Vect n）。解答了我多年的疑问（不是）我们为什么不能干脆把长度视为一个泛型丢进 vector 里呢？ Idris 说行，当然行：</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="idris2"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#D73A49;--shiki-dark:#F97583"> Vect</span><span style="color:#D73A49;--shiki-dark:#F97583"> :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Nat</span><span style="color:#D73A49;--shiki-dark:#F97583"> -</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> Type</span><span style="color:#D73A49;--shiki-dark:#F97583"> -</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> Type</span><span style="color:#D73A49;--shiki-dark:#F97583"> where</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">   Nil</span><span style="color:#D73A49;--shiki-dark:#F97583">  :</span><span style="color:#D73A49;--shiki-dark:#F97583"> Vect</span><span style="color:#D73A49;--shiki-dark:#F97583"> Z</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> a</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">   </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">::</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> Vect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> k a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#D73A49;--shiki-dark:#F97583"> Vect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#D73A49;--shiki-dark:#F97583">S</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> k</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> a</span></span></code></pre>
<p lang="zh"><code>Vect</code> 这个类型有了一个 Nat n 做参数，Idris2 基于量化类型理论实现了一个神奇的事情，如果你不用这个 n，它就能安全的在编译期被擦除，如果你用到它，它就会被保留。这里的 <code>Nat</code> 是一个 inductive type 可能实现成：</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="idris2"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#D73A49;--shiki-dark:#F97583"> Nat</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Z</span><span style="color:#6A737D;--shiki-dark:#6A737D">      -- Zero</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">         |</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> S</span><span style="color:#D73A49;--shiki-dark:#F97583"> Nat</span><span style="color:#6A737D;--shiki-dark:#6A737D">  -- Successor</span></span></code></pre>
<p lang="zh">一进制自然数有一个非常方便的结构，容易推理，而且容易与其他数据结构联系起来，比如上面的 Vect，可以很好的推理。尽管如此，我们当然并不希望这种方便是以牺牲效率为代价的。但是！Idris 它能知道 Nat（和类似的结构化类型）和数字之间的关系。这意味着它可以优化表示，以及诸如 plus 和 mult 等函数。</p>
<p lang="zh">有了 <code>Vect</code> 你就能容易写出常数时间的 len 函数（相反，List 需要遍历获取长度），</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="idris2"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Data.Vect</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">vlen </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> n </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Nat</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Vect</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> n a </span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Nat</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">vlen xs </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> n</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">test_vect </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> Vect</span><span style="color:#D73A49;--shiki-dark:#F97583"> ?</span><span style="color:#24292E;--shiki-dark:#E1E4E8">len </span><span style="color:#005CC5;--shiki-dark:#79B8FF">Nat</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">test_vect </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 4</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 5</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 4</span><span style="color:#D73A49;--shiki-dark:#F97583"> ::</span><span style="color:#D73A49;--shiki-dark:#F97583"> Nil</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> IO</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">main </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  printLn test_vect</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  printLn </span><span style="color:#D73A49;--shiki-dark:#F97583">$</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> vlen test_vect</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">-- [1, 1, 4, 5, 1, 4]</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">-- 6</span></span></code></pre>
<p lang="ln">还有 Linear Type 这个东西。</p>
<blockquote>
<p lang="zh">Idris 2 是基于 <a href="https://bentnib.org/quantitative-type-theory.html">量化类型理论（QTT）</a> ，这是由 Bob Atkey 和 Conor McBride 开发的核心语言。在实践中，Idris 2 中的每个变量都有一个 数量 与之相关。数量是的取值是下列其中之一：</p>
<ul lang="zh">
<li>0 ，表示变量在运行时被 <strong>擦除</strong></li>
<li>1 ，表示变量在运行时 <strong>正好使用一次</strong></li>
<li>不受限制 ，这与 Idris 1 的行为相同</li>
</ul>
</blockquote>
<p lang="zh">在 Idris 2 中你可以原生的用一些 Linear Type 的东西。这玩意核心思想大概是在结构性规则上去掉了收缩规则和弱化规则（参照： <a href="https://zhuanlan.zhihu.com/p/630206189">https://zhuanlan.zhihu.com/p/630206189</a> ）意味着 Linear 的 Type 只能使用，且必须使用一次。这种形式在一些东西上比较方便，比如说某种 resource，像 Connection 之类的，打开-关闭 总是成对出现。或者你写《编译原理》的时候你可能申请了一个 Label，那么你必须接下在 IR 中生成一个 Label declearion。</p>
<p lang="zh">RAII 当然可以保证一次释放，但是当一个东西的“生命周期”比较动态、甚至可能交叉的时候，常见的 RAII 模式就没那么好用了。</p>
<h3 id="javascript--typescript">Javascript / Typescript</h3>
<p lang="zh">JavaScript 系的缺点太多我觉得没必要说了，毕竟一个 10 天写出来的语言，蹭 Java 的热度，然后意外成了互联网标准这种事情……只能说这就是现实（）</p>
<p lang="zh">简单说些不好的地方：</p>
<ul lang="zh">
<li>没法重载运算符，写带计算的代码很丑陋（不过作为为网页服务的语言，遇到大量计算就上 WASM 了</li>
<li>你永远不知道是坨什么的 <code>this</code></li>
<li>到现在都没扯皮出公认的标准，都是 ES6 和 CommonJS 分立</li>
<li><code>==</code></li>
</ul>
<p lang="zh">JavaScript 系最大的优点大概是非常原生非常友好的 async/await。单线程的设计又让你根本不用在乎资源加锁之类的异步噩梦。</p>
<p lang="zh">而且 JavaScript 可能可以说是流行语言里最把 lambda 函数发扬光大的语言。也是动态类型语言里类型标记做的最好的——它甚至演化出了专门的 typescript</p>
<p lang="zh">也是因此，TypeScript 的类型系统实在是过于完备了，以至于大家仍然某种习惯于 JS 写法然后通过复杂的体操来保证 JS 写法是类型安全的，这其实有点呃呃</p>
<p lang="sv">并且 TypeScript 其实不完全是 null safe 的，比如说</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">const</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> a</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="color:#005cc5;--shiki-dark:#79b8ff">[</span><span style="color:#005cc5;--shiki-dark:#79b8ff">]</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">[</span><span style="color:#005cc5;--shiki-dark:#79b8ff">]</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">a</span><span style="color:#005cc5;--shiki-dark:#79b8ff">[</span><span style="color:#005CC5;--shiki-dark:#79B8FF">1</span><span style="color:#005cc5;--shiki-dark:#79b8ff">]</span><span style="color:#24292E;--shiki-dark:#E1E4E8">; </span><span style="color:#6A737D;--shiki-dark:#6A737D">// ts says string, but actually undefined</span></span></code></pre>
<p lang="da">typescript 不检查 out of range 的可能性，以至于当你给出 <code>string[]</code> 这样的类型的时候 ts 会认为任何一个 <code>number</code> 作为 index 传入都能得到一个 <code>string</code> —— 但致命的是，实际上翻译出的 js 它可能是 undefined</p>
<p lang="zh">这个非常的坑，可以说是 TypeScript 上巨大的一个洞，直接导致 undefined 可以打穿 ts 的类型系统。可惜木已成舟便是了。</p>
<h3 id="julia">Julia</h3>
<p>没学了.png</p>
<p lang="zh">不太喜欢它把一些常用函数丢到全局里面（比如 length），不过这语言也不是很工业的语言（？），似乎也没什么问题</p>
<p lang="zh">函数能管道调用，好评，就爱管道调用（）</p>
<h3 id="koka">Koka</h3>
<p><a href="https://koka-lang.github.io/koka/doc/book.html">https://koka-lang.github.io/koka/doc/book.html</a></p>
<p lang="de">一门 research 语言，语法看起来比较的 kotlin（？），博客的 Koka 语法高亮直接偷的 Kotlin 的。特色是 first class 级的支持 algebraic effect。</p>
<p lang="zh">dot selection 的糖吃得我很爽，我其实不是很喜欢 <code>|></code> 运算符 (<code>|> x f = f x</code>) 主要是因为这玩意不是很好打，一个不需要按 <kbd>Shift</kbd> 另一个需要。Koka 语言的 dot 运算符就是 <code>|></code> 的功能，很爽。</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="koka"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">fun</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> showit</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> s : </span><span style="color:#6F42C1;--shiki-dark:#B392F0">string</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  s.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">encode</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">3</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.count.println</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// the body desugars as println(count(encode(s,3)))</span></span></code></pre>
<p lang="zh">这玩意不支持 currying 有点意外，但是考虑到这个语法，直觉来看，似乎 effect 和 currying 不是很搭配。</p>
<p lang="en">然后还有 Trailing Lambdas, 这个糖让我想起了 Ruby 的 block 和 Kotlin 的 scope functions</p>
<blockquote>
<p lang="en">Koka allows anonymous functions to follow the function call instead – this is also known as trailing lambdas</p>
</blockquote>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="koka"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">fun</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hello</span><span style="color:#D73A49;--shiki-dark:#F97583">-</span><span style="color:#6F42C1;--shiki-dark:#B392F0">ten</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i :</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  while</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    println</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    i :</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="color:#D73A49;--shiki-dark:#F97583">+</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span></span></code></pre>
<p lang="en">比如这个 while，它看上去很像一个语法，但其实是个函数 desugared to <code>while( fn(){ i &#x3C; 10 }, fn(){ ... } )</code></p>
<p lang="zh">这样，许多的 control flow 都其实是一些用来当 control flow 的语法糖而已，看上去能很好的允许你自定义语法</p>
<h3 id="lean-4">Lean 4</h3>
<p>在学.png</p>
<p lang="zh">之前一直被这玩意恐怖的语法和恐怖的 unicode 符号吓退了不敢学，但是学起来发现还是很有趣（？</p>
<p lang="zh">可以当成定理证明器，也能作为 fp 用</p>
<p lang="zh">Lean 4 的开发环境是真的爽啊，右侧直接显示当前所在光标位置需要什么类型，给出的是什么类型（虽然这就是定理证明器要干的事情吧（））</p>
<p lang="zh">据说 Haskell 适合学习函数式编程，Lean 4 适合作为实践。实际上感觉……确实（？），Lean 4 的 std 是安装好的，所有类型都可以直接跑去看 std 的源码，享受 clangd/rust analyzer 级别的顶级 lsp 体验（）</p>
<p lang="zh">显然这玩意完全就不是一门工程语言，所以就不在工程上评价了，但是 Lean 4 无论是平时做题还是研究抽象还是学习 functional programing 都是极好的！赞了</p>
<p lang="zh">虽然入门的时候讨厌符号因为不知道怎么打和是什么意思 但是用起来的时候只能说真香 数学符号真好用（）</p>
<p lang="da">以及，作为 pure functional 语言有 <code>for</code> 和 <code>let mut</code> 这些东西（内部似乎是靠 rebind 和/或 state monad 做到的？），爽爽的，不像 Haskell 上手真的很……需要思维大变（（</p>
<p lang="zh">以及，作为学习函数式编程的语言的话，Lean4 编程真的好爽啊！！！！作为交互式定理证明器的它提供了一个非常爽的界面和 <code>#check</code> 和 <code>#eval</code> 接口，允许你快速检查一些复杂表达式的类型和求值。举个例子，看到 <code>List.span</code> 的描述：</p>
<blockquote>
<p lang="en"><code>O(|l|)</code>. <code>span p l</code> splits the list <code>l</code> into two parts, where the first part contains the longest initial segment for which <code>p</code> returns true and the second part is everything else.</p>
</blockquote>
<p>你可以随手就写一个</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="lean"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">#eval</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> "12345abced12345"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.data.span </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">·.isDigit</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span></code></pre>
<p lang="zh">右侧就会直接显示运算结果</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="lean"><code><span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#e36209;--shiki-dark:#ffab70">[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'2'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'3'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'4'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'5'</span><span style="color:#e36209;--shiki-dark:#ffab70">]</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#e36209;--shiki-dark:#ffab70">[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">'a'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'b'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'c'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'e'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'d'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'2'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'3'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'4'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'5'</span><span style="color:#e36209;--shiki-dark:#ffab70">]</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span></code></pre>
<p lang="zh">这可比 REPL 要爽多了！！！可以说连 jupyter notebook 都做不到这么爽实时交互（毕竟 Lean4 本职工作之一就是交互式定理证明器 233）</p>
<h3 id="lua">Lua</h3>
<p>TODO</p>
<h3 id="moonbit">MoonBit</h3>
<p lang="st"><a href="https://www.moonbitlang.com/">https://www.moonbitlang.com/</a></p>
<p lang="zh">中国自研编程语言，长得很像带 GC 的 Rust，实际上看上去也确实是带 GC 的 Rust</p>
<p lang="zh">语法看下来可以说几乎全抄的 Rust，改改说不定都能直接 cargo run 了（雾），但我完全不觉得这是 MoonBit 的缺点，反而觉得是优点</p>
<p lang="zh">如果 MoonBit 能通过各种各样的原因发达起来，一个是继承了 Rust 的各种特性的它基本上可以算作 ML 家族，直接几乎避免了类型错误出现的可能性，相信一定能一定程度上获得人的喜爱，另一方面可以说是像 Rust 和 ML 的敲门砖。觉得 Rust 太难的人或许可以用 MoonBit，二者相辅相成，同时 MoonBit 若能流行又能一定程度上扭转 C family 和 OOP 语言带来的一些走偏了的刻板印象，或能带动人们更加接受 functional 的思想，</p>
<p lang="zh">另外 MoonBit 的 functional 似乎比 Rust 做得还好诶，这是官网的示例，可以看出为函数式的写法做了不少优化：</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="moonbit"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">enum</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Resource</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  Text</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">String</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">  CSV</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">content~</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> String</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  Executable</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">let</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> resources </span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Map</span><span style="color:#005cc5;--shiki-dark:#79b8ff">[</span><span style="color:#6F42C1;--shiki-dark:#B392F0">String</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Resource</span><span style="color:#005cc5;--shiki-dark:#79b8ff">]</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">  "hello.txt"</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Text</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Hello, world! A long text."</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">  "test.csv"</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> CSV</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">content</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"name, age</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="color:#032F62;--shiki-dark:#9ECBFF">Alice, 25</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="color:#032F62;--shiki-dark:#9ECBFF">Bob, 30"</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">  "ls.exe"</span><span style="color:#D73A49;--shiki-dark:#F97583">:</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Executable</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> main </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  resources</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">iter</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">   .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">map_option</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#D73A49;--shiki-dark:#F97583">fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#5a32a3;--shiki-dark:#b392f0">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">name, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Text</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#6F42C1;--shiki-dark:#B392F0">str</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">|</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">name, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">CSV</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">content</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0">str</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> Some</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">name, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">str</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">_, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">Executable</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#6F42C1;--shiki-dark:#B392F0"> None</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  </span><span style="color:#5a32a3;--shiki-dark:#b392f0">}</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">map</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#D73A49;--shiki-dark:#F97583">fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#5a32a3;--shiki-dark:#b392f0">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">name, content</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      let</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> name </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> name</span><span style="color:#D73A49;--shiki-dark:#F97583">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">pad_start</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">' '</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      let</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> content </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> content</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">pad_end</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">' '</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">replace_all</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">old</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, new</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">" "</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">substring</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">start</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, end</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">10</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">      "</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="color:#032F62;--shiki-dark:#9ECBFF">name}: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="color:#032F62;--shiki-dark:#9ECBFF">content} ..."</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  </span><span style="color:#5a32a3;--shiki-dark:#b392f0">}</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">intersperse</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  .</span><span style="color:#6F42C1;--shiki-dark:#B392F0">fold</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">init</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"Summary:</span><span style="color:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#6F42C1;--shiki-dark:#B392F0">String</span><span style="color:#D73A49;--shiki-dark:#F97583">::</span><span style="color:#24292E;--shiki-dark:#E1E4E8">op_add</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">  |</span><span style="color:#24292E;--shiki-dark:#E1E4E8">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> println</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span></code></pre>
<p lang="zh">我很喜欢的 <code>|></code> 记号也是有的</p>
<h3 id="ocaml">OCaml</h3>
<p>在学.png</p>
<p>是 ML(<strong>M</strong>eta <strong>L</strong>anguage)的方言，并非 pure 的函数式语言。</p>
<p lang="zh">感觉像是试图变得工业一点，但没完全变（？）。感觉 OCaml 很适合一个已经被 OOP 和 过程式调教好了的人去接触函数式语言，毕竟它不是纯的，只要你想就能爆改状态，但是又鼓励用函数式的方法解决问题。感觉很适合学习函数式（大概吧，学的时候其实我已经逐渐开始函数式化了 可能感受不到之前那种整个世界都不再熟悉的感觉了（）</p>
<p lang="fr">Modules 的设计不太喜欢，没有 typeclass / trait 有点令人烦躁</p>
<p lang="zh">必须要吐槽一下的是 OCaml 这类 ML 系语言有点文化霸权的意味在里面，它们把字母的大小写用作了 identifer 的区分，直接造成了引入 Unicode 比较困难，然后 OCaml 大手一挥说我觉得 English 作为编程的事实标准很满意啊，然后直接抛弃了 Unicode 支持，我：？</p>
<p lang="zh">关键是还不是完全抛弃，它还允许了一些 Latin letters 的扩展：</p>
<blockquote>
<p lang="en">Identifiers are sequences of letters, digits, <code>_</code> (the underscore character), and <code>'</code> (the single quote), starting with a letter or an underscore. Letters contain the 52 lowercase and uppercase letters from the ASCII set, letters ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ from the Latin-1 Supplement block, letters ŠšŽžŒœŸ from the Latin Extended-A block and upper case ẞ (U+189E). Any byte sequence which is equivalent to one of these Unicode characters under NFC1 is supported too.</p>
</blockquote>
<p lang="zh">明晃晃的文化霸凌啊喂喂</p>
<h3 id="purescript">PureScript</h3>
<p lang="zh">生成出的 JavaScript 闭包层数多得令人安息，性能不难想象了只能说</p>
<h3 id="python">Python</h3>
<p lang="zh">Python 的火爆完全来自于优秀的库而不是优秀的语言设计，夸张点说 Python 完全展示了什么叫糟糕的语言设计硬被优秀的库带飞。</p>
<p lang="zh">完全不觉得 Python 是很适合工程实践的语言。它更多的是一门教科书语言，类似以前的 BASIC，很适合初学者浅尝辄止地入门，但是稍微复杂一点就完全是噩梦，更何况 Python 的语言设计还很糟糕</p>
<p lang="zh">我不喜欢 Python 设计者的审美，比如认为 lambda 函数没有必要可以用具名函数取代。也不喜欢缩进表示一个块。</p>
<p lang="zh">并且 Python 真的不思进取。换其它语言如果有这么多优秀的库这么多资金绝对不会放任自己的性能烂成这样，但是 Python 到写下这一段的时候都还没有成熟的 JIT。</p>
<h3 id="rescript">ReScript</h3>
<p>OCaml in Javascript!（不是</p>
<p lang="zh">可以看出有很多参考了 OCaml 的地方。似乎把自己和 JSX 很绑定在了一起，感觉某种程度上是一个语言和库的混合物。</p>
<p lang="zh">生成的变量全部是 var 有点哈人，但是确实也没有问题，可能 var 性能要好一点？</p>
<p lang="zh">看到 for 循环也绑定的 var 第一反应是吓了一跳，因为有一个著名的闭包问题，如果</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">for</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="color:#D73A49;--shiki-dark:#F97583">++</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583">></span><span style="color:#24292E;--shiki-dark:#E1E4E8"> console.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">log</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">i</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, i </span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
<p lang="zh">会输出 10 个 11，因为 i 绑定的是外部的 var，换成 let 就会正常输出 1 ~ 10 了。于是看了 ReScript 的代码生成：</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>for i in 1 to 10 {</span></span>
<span class="line"><span>  Js.Global.setTimeout(() => {</span></span>
<span class="line"><span>    Js.log("This is a test log: " ++ i->Int.toString)</span></span>
<span class="line"><span>  }, i * 100) -> ignore</span></span>
<span class="line"><span>}</span></span></code></pre>
<p>这份代码生成出的是</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">for</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#D73A49;--shiki-dark:#F97583">var</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="color:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">; </span><span style="color:#D73A49;--shiki-dark:#F97583">++</span><span style="color:#24292E;--shiki-dark:#E1E4E8">i</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">  setTimeout</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#D73A49;--shiki-dark:#F97583">function</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">i</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">      return</span><span style="color:#D73A49;--shiki-dark:#F97583"> function</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#e36209;--shiki-dark:#ffab70">{</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">log</span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"This is a test log: "</span><span style="color:#D73A49;--shiki-dark:#F97583"> +</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">      </span><span style="color:#e36209;--shiki-dark:#ffab70">}</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    </span><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">i</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    Math.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">imul</span><span style="color:#5a32a3;--shiki-dark:#b392f0">(</span><span style="color:#24292E;--shiki-dark:#E1E4E8">i, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">100</span><span style="color:#5a32a3;--shiki-dark:#b392f0">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  </span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span></code></pre>
<p lang="zh">直接用传统手段把 var 用参数穿进闭包里了，这样或许会兼容性好一点（都什么年代了还在乎 IE 兼容性？），也可能快一点吧？</p>
<p lang="zh">很讨厌 ReScript 的 jsx 里不能插入文本自动转变成 React.string 的设计，以至于必须写成</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;div className="p-6"></span></span>
<span class="line"><span>  &#x3C;h1 className="text-3xl font-semibold"> {"What is this about?"->React.string} &#x3C;/h1></span></span>
<span class="line"><span>  &#x3C;p></span></span>
<span class="line"><span>    {React.string("This is a simple template for a Vite project using ReScript &#x26; Tailwind CSS.")}</span></span>
<span class="line"><span>  &#x3C;/p></span></span>
<span class="line"><span>  &#x3C;h2 className="text-2xl font-semibold mt-5"> {React.string("Fast Refresh Test")} &#x3C;/h2></span></span>
<span class="line"><span>  &#x3C;Button onClick={_ => setCount(count => count + 1)}></span></span>
<span class="line"><span>    {React.string(`count is ${count->Int.toString}`)}</span></span>
<span class="line"><span>  &#x3C;/Button></span></span>
<span class="line"><span>  &#x3C;p></span></span>
<span class="line"><span>    {React.string(`Edit `)}</span></span>
<span class="line"><span>    &#x3C;code> {React.string("src/App.res")} &#x3C;/code></span></span>
<span class="line"><span>    {React.string(" and save to see Fast Refresh.")}</span></span>
<span class="line"><span>  &#x3C;/p></span></span>
<span class="line"><span>&#x3C;/div></span></span></code></pre>
<p lang="zh">哦我的上帝啊，不觉得满天的 <code>React.string</code> 极其的视觉噪音吗？</p>
<p lang="zh">当然一个成熟的项目所有这里的文本都应该（几乎应该）替换成 I18n，但是还是改变不了这个设计很恶心的事实</p>
<p lang="zh">我觉得 ReScript 要能达到“知名”，哪怕不是稍微撼动一点 ts 的地位，都是几乎不可能做到的</p>
<h3 id="ruby">Ruby</h3>
<p lang="zh">相当优雅的设计，动态到叛逆。我对 Ruby 最大的好感来自它不试图用各种什么哲学什么风格指南约束程序员，如果 Ruby 有哲学，那就是最大的让程序员幸福</p>
<p lang="zh">因此写 Ruby 代码确实很舒服——如果抛开过于动态导致的特别容易出运行时类型错误不谈的话……</p>
<p lang="zh">Ruby 最使我影响深刻的或许是类似这样的代码</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ruby"><code><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">3</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">times</span><span style="color:#D73A49;--shiki-dark:#F97583"> do</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">  say </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"hello!"</span></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">  sleep</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">seconds</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">end</span></span></code></pre>
<p lang="zh">这是我在其他任何语言都没感受到的神奇的 magic，或者说其它语言当然也能写出类似的代码，但只有 Ruby 鼓励这样做，并且到处都是这样做，让整个代码特别具有“阅读感”，哪怕一个什么都不知道的新人看到这样的代码估计也能瞬间理解它在干什么，只是可能不知道具体是什么原理而已。</p>
<p><a href="https://rubyonrails.org/doctrine/zh_cn#optimize-for-programmer-happiness">Rails 宣言有说</a>：</p>
<blockquote>
<p lang="zh">另一个例子仅用了些许代码实现，却几乎引发了惊愕的程度。<code>Array#second</code> 到 <code>#fifth</code>（以及挑衅意味的 <code>#forty_two</code>）。这些别名的存取器，非常严重地冒犯了常发表意见的支持者，他们说：这简直太过度设计了（几乎是编程时代的结束），这些写成 <code>Array#[1]</code>、<code>Array#[2]</code>（以及 <code>Array[41]</code>）不就可以了嘛。</p>
<p lang="zh">但时至今日，主要的抉择还是，让我自己开心。我喜欢在终端或测试里编写 <code>people.third</code>。不，这不合理，也不高效。可能我有病吧，但这仍能让我发自内心地微笑，满足了这个理念，也丰富了我的人生，帮我在过了 12 年之后，还仍继续参与 Rails。</p>
</blockquote>
<p lang="zh">这个真的非常叛逆，在许多语言都在宣传“做事情只有一个最好的方式”（盯 Python），甚至直接在程序语言上拒绝和故意劣化某些风格的时候，Ruby 的想法缺是做事情可以有很多种方式，程序员来选择最让自己幸福的方式。大家都在把程序员当成 <code>思路 -> 代码</code> 的翻译工具，而 Ruby 选择将程序员视为作家。Ruby 的放纵让人感到某种幸福。</p>
<p lang="zh">另外一个令我有些感动的是 Ruby 到现在已经逐渐不再流行，但是仍然在努力做出改善，Ruby YJIT 已经可以进入生产环境并且被 Rails 默认开启。以前 Ruby 最大的诟病是它慢，慢地出奇，比 Python 还慢，但是现在 Ruby 的速度已经逐渐追上的 Python。</p>
<p lang="zh">说完优点，Ruby 一个很大的缺点是：你家语言三个闭包.png</p>
<p lang="zh">在 Ruby 中有三种不同方式去声明一个闭包，我觉得这完全是没必要的，</p>
<h3 id="rust">Rust</h3>
<p lang="zh">虽然 Rust 社群的名声不好 <del>语言原神</del>，但是不得不承认的是 Rust 是一门非常优秀的语言。我对 Rust 最大的好感度其实不是内存安全性 —— 毕竟合格的程序员应该能用任何语言写出内存安全的代码 —— 而是 Rust 非常优秀的模式匹配和语法。</p>
<p lang="zh"><code>Option&#x3C;T></code> 是现代且优秀的思路，我觉得所有可能带 null 的语言都应该引入它。而 Rust 在这一类功能上做得非常好。虽然 <code>Result&#x3C;T, E></code> 和异常的优劣可能有待商榷。但是大部分情况，Rust 的 enum 的设计做得非常的不错，完全改变了 enum 曾经只是个不蕴含实际信息的“标记”的情况。</p>
<p lang="zh">如果 rust 没有内存安全作为梗小鬼的吹嘘资本，哪怕是优秀的语法设计也能让它成为一门优秀的语言。</p>
<p lang="zh">更新：后面我发现这是来自于 ML 语言家族的特征（xd</p>
<p lang="zh">Rust 或许不够优雅（确实不够），但它是 C++ 竞争生态位上的唯一选手（zig 是和 C 在竞争）。原先底层语言+没有 GC 很大程度上就意味着即使是顶尖高手也可能失手写出缓冲区溢出、use after free、线程不安全等种种问题，Rust 提供了一种哪怕是初学者也能保证程序安全的方案，这是它最大的好处，也是最大的竞争力所在。</p>
<p lang="zh">同时，Rust 的高性能还直接带来了更多在应用层使用与 C++ 接近的性能的无 GC 原生语言的可能。比如 <a href="https://discord.com/blog/why-discord-is-switching-from-go-to-rust">Discord 为什么从 Go 迁移到 Rust</a>，在延迟敏感网络服务器上，GC 逐渐变得难以承受的时候，Rust 提供了一种安全的选择从有 GC 迁移到无 GC，这之前很大概率需要更加经验丰富的 C++ 程序员花费更多时间来确保安全性。</p>
<h3 id="standard-ml">Standard ML</h3>
<p lang="zh">ML 语言的老东西。</p>
<p>详见 <a href="/2025/05/30/sml-intro/">Standard ML 尝旧</a> 这篇文章</p>
<h3 id="zig">Zig</h3>
<p lang="zh">better c，相比 C 而言有出色得多的设计。</p>
<p lang="zh">比较喜欢 zig 似乎是从 go 上继承来的思路： <code>defer</code> 关键字，保证在各种情况下退出当前 scope 的时候执行，这意味着相比于 C，Zig 能更简单的确保内存分配总是伴随着释放，更不容易写出内存问题</p>
<p lang="zh">比如经常可能看到这样的 zig 代码：</p>
<pre class="astro-code astro-code-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="zig"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">pub</span><span style="color:#D73A49;--shiki-dark:#F97583"> fn</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> create</span><span style="color:#005cc5;--shiki-dark:#79b8ff">(</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#FFAB70">    alloc</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: </span><span style="color:#E36209;--shiki-dark:#FFAB70">Allocator</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#E36209;--shiki-dark:#FFAB70">CreateError</span><span style="color:#D73A49;--shiki-dark:#F97583">!*</span><span style="color:#E36209;--shiki-dark:#FFAB70">App</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> </span><span style="color:#005cc5;--shiki-dark:#79b8ff">{</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    var</span><span style="color:#E36209;--shiki-dark:#FFAB70"> app</span><span style="color:#D73A49;--shiki-dark:#F97583"> =</span><span style="color:#D73A49;--shiki-dark:#F97583"> try</span><span style="color:#E36209;--shiki-dark:#FFAB70"> alloc</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">create</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">App</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    errdefer</span><span style="color:#E36209;--shiki-dark:#FFAB70"> alloc</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.</span><span style="color:#6F42C1;--shiki-dark:#B392F0">destroy</span><span style="color:#e36209;--shiki-dark:#ffab70">(</span><span style="color:#E36209;--shiki-dark:#FFAB70">app</span><span style="color:#e36209;--shiki-dark:#ffab70">)</span><span style="color:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#005cc5;--shiki-dark:#79b8ff">}</span></span></code></pre>
<p lang="zh">defer 比傻傻的手动在函数最后释放，一不小心还可能忘掉可高级太多了！</p>
<p lang="zh">不那么喜欢的是 zig 不支持方便的闭包，或者说，虽然可以写出闭包来但是很麻烦。</p>
<p lang="zh">然后 zig 的 compiletime 非常的神奇，我很喜欢这个，编译期间执行任意函数，把编译期干的活和普通代码融合在一起，简直太好用了</p>
<p lang="zh">专门为 zig 写了一篇 intro，见：<a href="/2025/02/06/zig-first-experience/">更好的 C 语言：Zig 初体验</a></p> </div>
    <div class="divider"></div>
    <p class="post-meta flex flex-wrap items-center gap-2 text-base-content/60 undefined" data-astro-cid-qtyrxm4s> <span class="date flex gap-1 items-center flex-shrink-0 text-sm" data-astro-cid-qtyrxm4s> <svg width="1em" height="1em" data-icon="mingcute:calendar-2-line">   <symbol id="ai:mingcute:calendar-2-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M16 3a1 1 0 0 1 1 1v1h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2V4a1 1 0 0 1 2 0v1h6V4a1 1 0 0 1 1-1M8 7H5v2h14V7h-3zm-3 4v8h14v-8zm2 2a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1m1 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2zm3-2a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H12a1 1 0 0 1-1-1m1 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2zm3-2a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H16a1 1 0 0 1-1-1m1 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2z"/></g></symbol><use href="#ai:mingcute:calendar-2-line"></use>  </svg> <time datetime="2024-12-08T00:05:46.000Z"> 2024-12-08 </time> </span> <span class="categories items" data-astro-cid-qtyrxm4s>  </span> <span class="tags items" data-astro-cid-qtyrxm4s> <a class="item" href="/tags/Code/" data-astro-cid-qtyrxm4s> <svg width="1em" height="1em" class="flex-shrink-0" data-astro-cid-qtyrxm4s="true" data-icon="mingcute:tag-line">   <symbol id="ai:mingcute:tag-line" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M10.537 2.164a3 3 0 0 1 2.244.727l.15.14l7.822 7.823a3 3 0 0 1 .135 4.098l-.135.144l-5.657 5.657a3 3 0 0 1-4.098.135l-.144-.135L3.03 12.93a3 3 0 0 1-.878-2.188l.011-.205l.472-5.185a3 3 0 0 1 2.537-2.695l.179-.021zm.308 1.989l-.127.003l-5.185.472a1 1 0 0 0-.888.787l-.017.118l-.472 5.185a1 1 0 0 0 .206.703l.083.095l7.823 7.823a1 1 0 0 0 1.32.083l.094-.083l5.657-5.657a1 1 0 0 0 .083-1.32l-.083-.094l-7.823-7.823a1 1 0 0 0-.671-.292M7.317 7.318a3 3 0 1 1 4.243 4.243a3 3 0 0 1-4.243-4.243m2.829 1.414a1 1 0 1 0-1.415 1.414a1 1 0 0 0 1.415-1.414"/></g></symbol><use href="#ai:mingcute:tag-line"></use>  </svg> <span class="truncate" data-astro-cid-qtyrxm4s>Code</span> </a> </span> </p> 
    <div class="mt-8"><div class="comments-container"> <div id="gitalk-mainEl" data-uid="blog:programing-language-impressions"></div> </div> <script type="module" src="/_astro/GitalkComment.astro_astro_type_script_index_0_lang.yHboq2cn.js"></script> </div> </div> </article>  </main> <footer> <div class="text-center mb-4 markdown-body"> <p>
&copy; 2025 Linca. All rights reserved.
</p> <p>
开业 <span id="BLOG_DAYS" data-first-date="1538918349000">2543</span> 天里，写下了 54 篇博客，2 篇页面，8 篇杂记，352905 字符。
</p> <p>
Powered by
<a href="https://astro.build" target="_blank" rel="noopener noreferrer">
Astro
</a>
and
<a href="https://github.com/Lhcfl/astro-theme-krypton2" target="_blank" rel="noopener noreferrer">
Krypton 2
</a>.
</p> </div> </footer> <script type="module">document.addEventListener("astro:page-load",()=>{const t=document.getElementById("BLOG_DAYS");if(t){const e=Date.now()-Number(t.dataset.firstDate),n=Math.floor(e/(1e3*60*60*24));t.textContent=n.toString()}});</script> </div> </div> <div class="sidebar__outer-container
              hidden print:hidden!
              flex-grow-0 flex-shrink max-w-70 has-sidebar:flex-shrink-0
              md:block md:relative md:has-sidebar:w-50
              lg:flex-shrink-0 lg:has-sidebar:w-70
              xl:w-70
              max-md:show-toc:z-10 max-md:show-toc:block max-md:show-toc:fixed max-md:show-toc:bottom-2 max-md:show-toc:w-full max-md:show-toc:max-w-full
              max-md:[body.show-toc_&]:animate-fade-in-up max-md:[body.show-toc_&]:animate-duration-300 max-md:[body.show-toc_&]:animate-ease-in-out
              max-md:[body.removing-toc_&]:animate-fade-out-down max-md:[body.removing-toc_&]:animate-duration-300 max-md:[body.removing-toc_&]:animate-ease-in-out"> <div class="sidebar__inner-container
          sticky top-0 bg-surface pt-6
          md:px-0 md:h-screen
          max-md:show-toc:px-2 max-md:show-toc:pt-4 max-md:show-toc:border-t max-md:show-toc:border-base-300 overflow-y-auto overflow-x-visible">  <div class="hidden has-sidebar:block min-[55rem]:block"> <div id="page-toc"> <ul class="timeline w-full"> <li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="c"> <a href="#c" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">C</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="c-1"> <a href="#c-1" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">C++</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="crystal"> <a href="#crystal" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Crystal</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="elixir"> <a href="#elixir" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Elixir</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="gleam"> <a href="#gleam" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Gleam</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="haskell"> <a href="#haskell" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Haskell</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="idris--idris-2"> <a href="#idris--idris-2" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Idris / Idris 2</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="javascript--typescript"> <a href="#javascript--typescript" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Javascript / Typescript</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="julia"> <a href="#julia" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Julia</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="koka"> <a href="#koka" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Koka</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="lean-4"> <a href="#lean-4" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Lean 4</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="lua"> <a href="#lua" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Lua</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="moonbit"> <a href="#moonbit" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">MoonBit</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="ocaml"> <a href="#ocaml" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">OCaml</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="purescript"> <a href="#purescript" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">PureScript</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="python"> <a href="#python" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Python</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="rescript"> <a href="#rescript" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">ReScript</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="ruby"> <a href="#ruby" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Ruby</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="rust"> <a href="#rust" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Rust</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="standard-ml"> <a href="#standard-ml" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Standard ML</span> </a> </li><li class="toc-item group flex items-center gap-2 transition" un-text="base-content/60 [&.active]:secondary [&.active-now]:secondary+30" un-p="x-2 y-1" un-hover="bg-secondary/10 text-secondary" data-slug="zig"> <a href="#zig" class="flex items-center gap-1 w-full"> <div class="flex-shrink-0 i-mingcute-add-circle-line group-[.active]:i-mingcute-check-circle-fill group-[.active-now]:i-mingcute-arrow-right-circle-fill"></div> <span class="ml-0">Zig</span> </a> </li> </ul> </div> <script type="module">function c(i,l){let t=null,e=!1;function o(...s){e?t=s:(i.apply(this,s),e=!0,setTimeout(()=>{e=!1,t&&(o.apply(this,t),t=null)},l))}return o}function n(i){const l=document.getElementById("page-toc");if(!l)return;const t=l.querySelectorAll("li");if(t.forEach(e=>e.classList.remove("active","active-now")),i!=null)for(const e of t){if(e.dataset.slug===i){e.classList.add("active-now");break}e.classList.add("active")}}const r=c(()=>{const i=document.querySelector(".markdown-body.is-detailed");if(!i)return;const l=Array.from(i.querySelectorAll("h1,h2,h3,h4,h5,h6").values()),t=l.findIndex(e=>e.getBoundingClientRect().y>110);t===0?n(null):t==-1?n(l.at(-1)?.id):n(l.at(t-1)?.id)},200);document.addEventListener("scroll",r);</script> </div> </div> </div>  </div> <div class="float-buttons fixed bottom-4 right-4 flex flex-col gap-2 print:hidden! text-base-content" aria-hidden="true"> <div class="opacity-0 translate-x-20 transition [body.is-scrolled_&]:opacity-100 [body.is-scrolled_&]:translate-x-0"> <button onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" class="rounded-full p-4 text-lg md:text-xl bg-surface border-base-300 border" aria-label="Scroll to top"> <div class="i-mingcute:arrow-up-line"></div> </button> </div> <div class="hidden has-sidebar:block md:hidden!"> <button onclick="document.body.classList.add('show-toc')" class="rounded-full p-4 text-lg md:text-xl bg-surface border-base-300 border" aria-label="Show TOC"> <div class="i-mingcute:list-check-fill"></div> </button> </div> </div> <script type="module">document.addEventListener("scroll",()=>{window.scrollY>100?document.body.classList.add("is-scrolled"):document.body.classList.remove("is-scrolled")});document.addEventListener("click",s=>{if(!document.body.classList.contains("show-toc"))return;let t=s.target;for(;t!=null;){if(t.classList.contains("float-buttons")||t.classList.contains("sidebar__inner-container"))return;t=t.parentElement}document.body.classList.remove("show-toc"),document.body.classList.add("removing-toc"),setTimeout(()=>{document.body.classList.remove("removing-toc")},280),s.stopPropagation()});</script> </body></html>