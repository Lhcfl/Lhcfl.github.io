import{ag as m,n as b,H as D,M as H,ah as g,j as l,i as R,e as I,m as f,u as L,ai as O,aj as V,F as j,y as M,ak as Y,o as k,l as x,h as p,T as C,ab as P,ae as $,c as F,Z as W}from"./template.CvCTx1dv.js";import{a as Z,r as N,h as c}from"./events.DWh0XFaY.js";const q=["touchstart","touchmove"];function z(t){return q.includes(t)}function K(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function B(t,e){return A(t,e)}function Q(t,e){m(),e.intro=e.intro??!1;const r=e.target,u=p,_=f;try{for(var a=b(r);a&&(a.nodeType!==8||a.data!==D);)a=H(a);if(!a)throw g;l(!0),R(a),I();const d=A(t,{...e,anchor:a});if(f===null||f.nodeType!==8||f.data!==L)throw O(),g;return l(!1),d}catch(d){if(d===g)return e.recover===!1&&V(),m(),j(r),l(!1),B(t,e);throw d}finally{l(u),R(_)}}const i=new Map;function A(t,{target:e,anchor:r,props:u={},events:_,context:a,intro:d=!0}){m();var h=new Set,v=o=>{for(var s=0;s<o.length;s++){var n=o[s];if(!h.has(n)){h.add(n);var T=z(n);e.addEventListener(n,c,{passive:T});var w=i.get(n);w===void 0?(document.addEventListener(n,c,{passive:T}),i.set(n,1)):i.set(n,w+1)}}};v(M(Z)),N.add(v);var y=void 0,S=Y(()=>{var o=r??e.appendChild(k());return x(()=>{if(a){C({});var s=P;s.c=a}_&&(u.$$events=_),p&&$(o,null),y=t(o,u)||{},p&&(F.nodes_end=f),a&&W()}),()=>{for(var s of h){e.removeEventListener(s,c);var n=i.get(s);--n===0?(document.removeEventListener(s,c),i.delete(s)):i.set(s,n)}N.delete(v),o!==r&&o.parentNode?.removeChild(o)}});return E.set(y,S),y}let E=new WeakMap;function U(t,e){const r=E.get(t);return r?(E.delete(t),r(e)):Promise.resolve()}export{Q as h,B as m,K as s,U as u};
